<form [formGroup]="registerForm" aria-label="Register Form" (ngSubmit)="register()">
  <!-- الهاتف: input + ng-select (code) + العلم — نفس شكل اللوجن -->
  <div class="mb-4">
    <label for="phone" class="mb-2 required fw-medium">
      {{ 'label.phone' | translate }}
    </label>

    <div class="form-control p-0 d-flex align-items-center"
         [class.is-invalid]="formControls?.phone?.invalid && (formControls?.phone?.dirty || formControls?.phone?.touched)">

      <!-- رقم الهاتف -->
      <input
        type="tel"
        id="phone"
        class="form-control border-0"
        formControlName="phone"
        autocomplete="tel"
        [disabled]="isLoading()"
        (input)="clearValidationErrors(formControls?.phone)"
        inputmode="numeric"
        pattern="[0-9]*"
        dir="ltr"
        [class.is-invalid]="formControls?.phone?.invalid && (formControls?.phone?.dirty || formControls?.phone?.touched)"
        placeholder="{{ 'placeholder.phoneNumber' | translate }}">

      <!-- كود الدولة (نخزن Object زي اللوجن) -->
      <ng-select
        formControlName="code"
        class="dial-select"
        [items]="countriesPhoneCode()"
        [clearable]="false"
        [searchable]="true"
        [labelForId]="'code'"
        [bindLabel]="'code'">
      </ng-select>

      <!-- العلم -->
      <img
        class="flag-static"
        [src]="currentFlag()"
        alt=""
        aria-hidden="true"
        [attr.width]="22"
        [attr.height]="16"
      />
    </div>

    @if (formControls?.phone?.invalid && (formControls?.phone?.dirty || formControls?.phone?.touched)) {
      <div class="mt-1">
        @if (formControls?.phone?.errors?.['required']) {
          <small class="text-danger fs-8">{{ 'validation.required' | translate }}</small>
        }
        @if (formControls?.phone?.errors?.['phoneLength']) {
          <small class="text-danger fs-8 d-block">
            {{ 'رقم الهاتف غير صحيح. ' }}
            {{ formControls?.phone?.errors?.['phoneLength']?.required }}
          </small>
        }
        @if (formControls?.phone?.errors?.['digitsOnly']) {
          <small class="text-danger fs-8 d-block">{{ 'من فضلك أدخل أرقام فقط' }}</small>
        }
      </div>
    }
  </div>

  <!-- كلمة المرور -->
  <div class="mb-2">
    <label for="password" class="mb-2 required fw-medium">
      {{ 'auth.passwordLabel' | translate }}
    </label>
    <input
      [type]="showEye() ? 'text' : 'password'"
      id="password"
      class="form-control"
      formControlName="password"
      autocomplete="new-password"
      [disabled]="isLoading()"
      (input)="clearValidationErrors(formControls?.password)"
      [class.is-invalid]="formControls?.password?.invalid && (formControls?.password?.dirty || formControls?.password?.touched)"
      placeholder="{{ 'auth.passwordPlaceholder' | translate }}">
  </div>

  <!-- زر الإرسال -->
  <button class="btn btn-main-color w-100 mt-5" [disabled]="isLoading()">
    {{ 'auth.submitButton' | translate }}
  </button>

  <!-- رابط العودة لتسجيل الدخول -->
  <div class="mt-3">
    <p class="d-flex align-items-center gap-2">
      <span>{{ 'auth.haveAccount' | translate }}</span>
      <a class="text-main-color" [routerLink]="['/auth/login']">{{ 'auth.login' | translate }}</a>
    </p>
  </div>
</form>
