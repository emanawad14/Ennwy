/* غلاف عام */
.chat-shell { min-height: 70vh; }

/* شبكة الديسكتوب */
.chat-grid {
  display: grid;
  grid-template-areas: "side" "main";
  grid-template-columns: 1fr;
  gap: 1rem;
}
@media (min-width: 992px) {
  .chat-grid { grid-template-columns: 0.35fr 0.65fr; grid-template-areas: "side main"; }
  [dir="rtl"] .chat-grid { grid-template-columns: 0.65fr 0.35fr; grid-template-areas: "main side"; }

  .chat-sidebar, .chat-main { height: calc(100vh - 180px); max-height: calc(100vh - 180px); }
  .chat-list { height: calc(100vh - 180px); max-height: calc(100vh - 180px); overflow-y: auto; }
}
.chat-sidebar { grid-area: side; }
.chat-main { grid-area: main; }

/* البحث ثابت */
.sticky-top { position: sticky; top: 0; z-index: 1; }

/* اختيار نشط */
.list-group-item.active {
  background-color: #ffe9ea !important;
  border-color: #ffe9ea !important;
  color: #212529 !important;
}
.list-group-item.active .text-muted { color: rgba(33,37,41,.75) !important; }

/* الرسائل */
.msg-row { display: flex; margin-bottom: .75rem; }
.msg-row.mine { justify-content: flex-end; }
.msg-row.their { justify-content: flex-start; }
.msg-bubble {
  max-width: min(75%, 640px);
  padding: .6rem .8rem;
  border-radius: 16px;
  background: #f1f3f5;
}
.msg-row.mine .msg-bubble { background: #ffe9ea; color: #212529; border-top-right-radius: 4px; border-top-left-radius: 16px; }
.msg-row.their .msg-bubble { background: #f1f3f5; color: #212529; border-top-left-radius: 4px; border-top-right-radius: 16px; }
[dir="rtl"] .msg-row.mine .msg-bubble { border-top-right-radius: 16px; border-top-left-radius: 4px; }
[dir="rtl"] .msg-row.their .msg-bubble { border-top-left-radius: 16px; border-top-right-radius: 4px; }

.msg-text { white-space: pre-wrap; word-break: break-word; }
.msg-image { display: block; max-width: 100%; height: auto; border-radius: 12px; background: #fff; }

/* الرسائل داخل الكارد */
.chat-main .card-body { display: flex; flex-direction: column; height: 100%; overflow: hidden; }
.messages-area { flex: 1 1 auto; overflow-y: auto; padding: .5rem; }

/* إدخال */
.input-group input { border-top-right-radius: 0; border-bottom-right-radius: 0; }
.input-group .btn { border-top-left-radius: 0; border-bottom-left-radius: 0; }

/* موبايل: ارتفاعات تلقائية */
@media (max-width: 991.98px) {
  .chat-sidebar, .chat-main, .chat-list, .messages-area { height: auto; max-height: none; }
}

/* ===== إضافات الموبايل ===== */

/* أيقونة فتح الإعلان في الهيدر */
.mobile-ad-link{
  margin-inline-start: auto;       /* تدفعها لطرف السطر RTL/LTR */
  width: 36px; height: 36px; padding: 0;
  display: inline-flex; align-items: center; justify-content: center;
  border-radius: 10px;
}
.mobile-ad-link i{ font-size: 1rem; }

/* قصّ عنوان الإعلان لسطر واحد */
.chat-title { min-width: 0; }
.ad-title-clip{
  display: -webkit-box;
  -webkit-line-clamp: 1;       /* سطر واحد فقط */
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* زر العرض على الديسكتوب (لو عندك واحد مثبت) */
.ad-link-fixed-left { position: absolute; top: .75rem; left: 1rem; z-index: 3; }
[dir="rtl"] .ad-link-fixed-left { left: auto; right: 1rem; }

/* خلى الكارد فيه مساحة للزرّ المثبّت (للـdesktop فقط) */
@media (min-width: 992px){
  .chat-main .card-body{ position: relative; padding-top: 3.25rem; }
}
